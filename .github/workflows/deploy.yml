name: Deploy to dev.jobcurate.com

on:
  push:
    branches:
      - development

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    # - name: Install FTP client
    #   run: sudo apt-get install ftp

    - name: Install lftp
      run: sudo apt-get update && sudo apt-get install -y lftp

    - name: Deploy to FTP server
      env:
        FTP_SERVER: dev.jobcurate.com
        FTP_USERNAME: dev_jobcurate
        FTP_PASSWORD: 3CQA1NLTW
      run: |
        lftp -e "
        set ftp:ssl-allow true;
        set ftp:ssl-force true;
        set ftp:ssl-protect-data true;
        set ssl:verify-certificate no;
        open -u $FTP_USERNAME,$FTP_PASSWORD ftps://$FTP_SERVER;
        mirror -R . /home/jobcurate/dev.jobcurate.com;
        bye;
        "
